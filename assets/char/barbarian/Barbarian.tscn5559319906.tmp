[gd_scene load_steps=17 format=3 uid="uid://vofwv1xaidfq"]

[ext_resource type="Script" uid="uid://dr4ro5vt4ec1" path="res://assets/char/barbarian/villager.gd" id="1_6mk7q"]
[ext_resource type="PackedScene" uid="uid://cesoc8xrh2uuo" path="res://assets/char/barbarian/Barbarian.glb" id="1_ukqt3"]
[ext_resource type="AnimationLibrary" uid="uid://dkr5lrb446py5" path="res://assets/animation/Rig_Medium_General.glb" id="2_6mk7q"]
[ext_resource type="AnimationLibrary" uid="uid://h0jm1djk63uc" path="res://assets/animation/Rig_Medium_MovementBasic.glb" id="3_sufnk"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ukqt3"]
animation = &"Rig_Medium_General/Idle_A"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_sufnk"]
animation = &"Rig_Medium_MovementBasic/Running_B"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6mk7q"]
animation = &"Rig_Medium_MovementBasic/Walking_B"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_sufnk"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6mk7q"]
xfade_time = 0.25
advance_mode = 2
advance_expression = "cur_state == State.IDLE"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ukqt3"]
xfade_time = 0.25
advance_mode = 2
advance_expression = "cur_state == State.FOLLOW_PATH"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ye3a1"]
advance_mode = 2
advance_expression = "cur_state == State.RUN_TO_PLAYER or cur_state == State.RETURN_TO_PATH"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xt8e2"]
advance_mode = 2
advance_expression = "cur_state == State.FOLLOW_PATH"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yldks"]
advance_mode = 2
advance_expression = "cur_state == State.RUN_TO_PLAYER or cur_state == State.RETURN_TO_PATH"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iq0uv"]
advance_mode = 2
advance_expression = "cur_state == State.IDLE"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_w8in7"]
states/End/position = Vector2(1139, 304)
states/Rig_Medium_General_Idle_A/node = SubResource("AnimationNodeAnimation_ukqt3")
states/Rig_Medium_General_Idle_A/position = Vector2(414, 122)
states/Rig_Medium_MovementBasic_Running_B/node = SubResource("AnimationNodeAnimation_sufnk")
states/Rig_Medium_MovementBasic_Running_B/position = Vector2(828, 163)
states/Rig_Medium_MovementBasic_Walking_B/node = SubResource("AnimationNodeAnimation_6mk7q")
states/Rig_Medium_MovementBasic_Walking_B/position = Vector2(541, 335)
states/Start/position = Vector2(191, 249)
transitions = ["Start", "Rig_Medium_General_Idle_A", SubResource("AnimationNodeStateMachineTransition_sufnk"), "Rig_Medium_MovementBasic_Walking_B", "Rig_Medium_General_Idle_A", SubResource("AnimationNodeStateMachineTransition_6mk7q"), "Rig_Medium_General_Idle_A", "Rig_Medium_MovementBasic_Walking_B", SubResource("AnimationNodeStateMachineTransition_ukqt3"), "Rig_Medium_MovementBasic_Walking_B", "Rig_Medium_MovementBasic_Running_B", SubResource("AnimationNodeStateMachineTransition_ye3a1"), "Rig_Medium_MovementBasic_Running_B", "Rig_Medium_MovementBasic_Walking_B", SubResource("AnimationNodeStateMachineTransition_xt8e2"), "Rig_Medium_General_Idle_A", "Rig_Medium_MovementBasic_Running_B", SubResource("AnimationNodeStateMachineTransition_yldks"), "Rig_Medium_MovementBasic_Running_B", "Rig_Medium_General_Idle_A", SubResource("AnimationNodeStateMachineTransition_iq0uv")]
graph_offset = Vector2(-129, 61)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_ukqt3"]
height = 2.25

[node name="Barbarian" type="CharacterBody3D"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
collision_layer = 2
collision_mask = 2
script = ExtResource("1_6mk7q")
SPEED = null
RUN_SPEED = null
ROTATION_SPEED = null
LIKE_SPEED = 0.5
player1_pos = null
player2_pos = null

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
root_node = NodePath("../BarbarianGLB")
libraries = {
&"Rig_Medium_General": ExtResource("2_6mk7q"),
&"Rig_Medium_MovementBasic": ExtResource("3_sufnk")
}

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../BarbarianGLB")
tree_root = SubResource("AnimationNodeStateMachine_w8in7")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../AnimationPlayer")

[node name="BarbarianGLB" parent="." instance=ExtResource("1_ukqt3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.015793204, 0, -0.005977869)

[node name="GeneralSkeleton" parent="BarbarianGLB/Rig_Medium" index="0"]
bones/1/position = Vector3(0, 0.38933998, 0)
bones/1/rotation = Quaternion(0.0015991876, 0.04315782, 6.908447e-05, 0.99906707)
bones/1/scale = Vector3(0.99999994, 1, 0.99999994)
bones/2/rotation = Quaternion(0.0043860404, 1.8513379e-09, 0.00037964582, 0.99999034)
bones/2/scale = Vector3(1.0000001, 1, 1.0000001)
bones/3/rotation = Quaternion(0.0011300662, 8.5179125e-10, 9.781604e-05, 0.9999994)
bones/4/rotation = Quaternion(0.77789265, 0.30887216, -0.53229326, 0.12706229)
bones/4/scale = Vector3(0.99999994, 0.99999964, 1.0000001)
bones/5/rotation = Quaternion(0.22185819, -0.6714007, 0.22185801, 0.67140085)
bones/5/scale = Vector3(1, 0.99999994, 1.0000001)
bones/6/rotation = Quaternion(6.030765e-08, 0.70710677, -2.3986061e-08, 0.70710677)
bones/6/scale = Vector3(1.0000001, 1, 1)
bones/7/rotation = Quaternion(0.18251747, 0.8936823, 0.22142442, 0.34495026)
bones/7/scale = Vector3(0.9999994, 0.9999993, 0.9999999)
bones/8/position = Vector3(5.1376087e-10, 0.09612512, -0.0575)
bones/8/rotation = Quaternion(0.0008667757, 0.00086679857, -0.70391774, 0.71028054)
bones/9/rotation = Quaternion(-0.012267834, -0.03133939, -0.0006753611, 0.99943334)
bones/9/scale = Vector3(0.99999994, 1, 1)
bones/10/rotation = Quaternion(0.7442517, -0.35764086, 0.5610897, 0.05797199)
bones/10/scale = Vector3(0.99999994, 0.99999946, 1.0000001)
bones/11/rotation = Quaternion(0.2333508, 0.6674933, -0.23335065, 0.6674935)
bones/11/scale = Vector3(1.0000001, 0.9999999, 1.0000001)
bones/12/rotation = Quaternion(1.6763806e-08, -0.70710677, -1.6763806e-08, 0.70710677)
bones/12/scale = Vector3(0.99999994, 0.99999994, 1)
bones/13/rotation = Quaternion(-0.13722341, 0.8888307, 0.21175672, -0.38250327)
bones/13/scale = Vector3(0.99999905, 0.99999905, 1)
bones/14/position = Vector3(-1.5415006e-08, 0.096125185, -0.0575)
bones/14/rotation = Quaternion(0.0008667757, -0.00086679857, 0.70391774, 0.71028054)
bones/14/scale = Vector3(1, 1.0000001, 1)
bones/15/rotation = Quaternion(-0.06979631, 0.0769589, 0.9928293, -0.059125163)
bones/15/scale = Vector3(0.9999999, 0.9999998, 0.9999996)
bones/16/rotation = Quaternion(-1.3030541e-07, 0.9827191, -0.18510321, -1.9766592e-08)
bones/16/scale = Vector3(1.0000004, 0.9999996, 0.9999999)
bones/17/rotation = Quaternion(0.014583712, 0.62235576, -0.77318186, 0.12103986)
bones/17/scale = Vector3(1.0000004, 0.9999994, 1.000001)
bones/18/rotation = Quaternion(-2.9030655e-06, 1, 0.0002895093, -2.0677987e-06)
bones/18/scale = Vector3(1.0000001, 1.0000013, 0.9999986)
bones/19/rotation = Quaternion(-0.031844236, 0.05261035, 0.99767125, 0.029499803)
bones/19/scale = Vector3(0.9999999, 0.9999999, 0.9999996)
bones/20/rotation = Quaternion(1.6112828e-07, 0.9805649, -0.19619542, 1.9232795e-08)
bones/20/scale = Vector3(0.99999994, 0.9999994, 0.9999997)
bones/21/rotation = Quaternion(-0.044385962, 0.5959395, -0.79477537, -0.105915904)
bones/21/scale = Vector3(0.99999976, 0.9999993, 1.000001)
bones/22/rotation = Quaternion(7.434201e-05, 1, 0.00034067035, 5.3566793e-05)
bones/22/scale = Vector3(1.0000002, 1.0000015, 0.9999982)

[node name="CollisionShape" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.125, 0)
shape = SubResource("CapsuleShape3D_ukqt3")

[node name="DebugTimer" type="Timer" parent="."]
autostart = true

[connection signal="timeout" from="DebugTimer" to="." method="_on_debug_timer_timeout"]

[editable path="BarbarianGLB"]
